(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={navbar:"Navbar_navbar__2bdKG",item:"Navbar_item__jzr_G",link:"Navbar_link__3LNpP",active:"Navbar_active__3nIBX",friendsBlock:"Navbar_friendsBlock__39HTz"}},11:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__mBztL",dialogsItems:"Dialogs_dialogsItems__1pv23",active:"Dialogs_active__2NI8r",dialog:"Dialogs_dialog__1x5HV",messages:"Dialogs_messages__1zmjC",message:"Dialogs_message__2WKLN",textArea:"Dialogs_textArea__3fDY6",buttonAddPost:"Dialogs_buttonAddPost__3JCOD"}},23:function(e,t,a){e.exports={header_logo:"Header_header_logo__ofk9p","header_logo-spin":"Header_header_logo-spin__3DZJJ",header:"Header_header__2nOzq",header_title:"Header_header_title__2Fifb",loginBlock:"Header_loginBlock__3hSjS"}},25:function(e,t,a){e.exports={content:"ProfileInfo_content__11S3N",image_container:"ProfileInfo_image_container__UIQaj",content_image:"ProfileInfo_content_image__2dC2Z",description:"ProfileInfo_description__2MZeb"}},27:function(e,t,a){e.exports=a.p+"static/media/friend.595172f9.jpg"},28:function(e,t,a){e.exports={postsBlock:"Myposts_postsBlock__2JCNy",textArea:"Myposts_textArea__2DBYT",buttonAddPost:"Myposts_buttonAddPost__1p-zJ"}},34:function(e,t,a){e.exports={userPhoto:"Users_userPhoto__21v4A",selectedPage:"Users_selectedPage__2dL3p"}},49:function(e,t,a){e.exports=a.p+"static/media/preloader.6c3daf60.svg"},50:function(e,t,a){e.exports=a.p+"static/media/myphoto.ba0c4a8e.jpg"},51:function(e,t,a){e.exports=a.p+"static/media/titlephoto.3903a2af.jpg"},52:function(e,t,a){e.exports={item:"Post_item__1JrN_"}},53:function(e,t,a){e.exports=a.p+"static/media/message.f0fb1b34.png"},54:function(e,t,a){e.exports=a.p+"static/media/intro.b8c9a73e.png"},55:function(e,t,a){e.exports=a(85)},78:function(e,t,a){},79:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(8),s=a(21),r=a(3),o=a(20),i=o.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"17d70425-6a66-487e-950c-b3b64159370e"}}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i.get("users?page=".concat(e,"&count=").concat(t)).then(function(e){return e.data})},l=function(e){return i.post("follow/".concat(e))},u=function(e){return i.delete("follow/".concat(e))},m=function(e){return console.warn("Obsolete method. Please profileAPI object."),d.getProfile(e)},d={getProfile:function(e){return i.get("profile/"+e)},getStatus:function(e){return i.get("profile/status/"+e)},updateStatus:function(e){return i.put("profile/status",{status:e})}},p={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"Blabla",likesCount:11},{id:4,message:"Dada",likesCount:11}],newPostText:"it-kamasutra.com",profile:null,status:""},g=function(e){return{type:"SET_STATUS",status:e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:5,message:e.newPostText,likesCount:0};return Object(r.a)({},e,{posts:[].concat(Object(s.a)(e.posts),[a]),newPostText:""});case"UPDATE-NEW-POST-TEXT":return Object(r.a)({},e,{newPostText:t.newText});case"SET_STATUS":return Object(r.a)({},e,{status:t.status});case"SET_USER_PROFILE":return Object(r.a)({},e,{profile:t.profile});default:return e}},E={dialogs:[{id:1,name:"Alex"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Alex"}],messages:[{id:1,message:"Hi"},{id:2,message:"Yo"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"How are you?"}],newMessageBody:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_NEW_MESSAGE_BODY":return Object(r.a)({},e,{newMessageBody:t.body});case"SEND_MESSAGE":var a=e.newMessageBody;return Object(r.a)({},e,{newMessageBody:"",messages:[].concat(Object(s.a)(e.messages),[{id:6,message:a}])});default:return e}},_={},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;arguments.length>1&&arguments[1];return e},b={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},P=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},O=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(r.a)({},e,{users:e.users.map(function(e){return e.id===t.userId?Object(r.a)({},e,{followed:!0}):e})});case"UNFOLLOW":return Object(r.a)({},e,{users:e.users.map(function(e){return e.id===t.userId?Object(r.a)({},e,{followed:!1}):e})});case"SET_USERS":return Object(r.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(r.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(r.a)({},e,{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(r.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(r.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(s.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter(function(e){return e!=t.userId})});default:return e}},S={userId:null,email:null,login:null,isAuth:!1},w=function(e,t,a){return{type:"SET_USER_DATA",data:{userId:e,email:t,login:a}}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(r.a)({},e,t.data,{isAuth:!0});default:return e}},y=a(45),T=Object(n.c)({profilePage:f,dialogsPage:h,sidebar:v,usersPage:N,auth:j}),C=Object(n.e)(T,Object(n.a)(y.a));window.store=C;var k=C,A=a(0),I=a.n(A),U=a(26),x=a.n(U),M=(a(78),a(79),a(1)),D=a.n(M),L=a(2),F=function(){return I.a.createElement("div",{className:D.a.navbar},I.a.createElement("div",{className:D.a.item},I.a.createElement("i",{className:"fa fa-address-book"}),I.a.createElement(L.b,{to:"/profile",className:D.a.link,activeClassName:D.a.active},"Profile")),I.a.createElement("div",{className:"".concat(D.a.item," ").concat(D.a.activel)},I.a.createElement("i",{className:"fa fa-comments"}),I.a.createElement(L.b,{to:"/dialogs",className:D.a.link,activeClassName:D.a.active},"Messages")),I.a.createElement("div",{className:"".concat(D.a.item," ").concat(D.a.activel)},I.a.createElement("i",{className:"fa fa-user"}),I.a.createElement(L.b,{to:"/users",className:D.a.link,activeClassName:D.a.active},"Users")),I.a.createElement("div",{className:D.a.item},I.a.createElement("i",{className:"fa fa-newspaper-o"}),I.a.createElement(L.b,{className:D.a.link,activeclassName:D.a.active},"News")),I.a.createElement("div",{className:D.a.item},I.a.createElement("i",{className:"fa fa-headphones"}),I.a.createElement(L.b,{className:D.a.link,activeclassName:D.a.active},"Music")),I.a.createElement("div",{className:D.a.item},I.a.createElement("i",{className:"fa fa-play"}),I.a.createElement(L.b,{className:D.a.link,activeclassName:D.a.active}," Video")),I.a.createElement("div",{className:D.a.item},I.a.createElement("i",{className:"fa fa-user-circle "}),I.a.createElement(L.b,{className:D.a.link,activeclassName:D.a.active},"Friends")))},B=a(19),G=a(11),R=a.n(G),z=function(e){var t="/dialogs/"+e.id;return I.a.createElement("div",{className:R.a.dialog+" "+R.a.active},I.a.createElement(L.b,{to:t},e.name))},W=function(e){return I.a.createElement("div",{className:R.a.dialog},e.message)},H=function(e){var t=e.dialogsPage,a=t.dialogs.map(function(e){return I.a.createElement(z,{name:e.name,key:e.id,id:e.id})}),n=t.messages.map(function(e){return I.a.createElement(W,{message:e.message,key:e.id})}),s=t.newMessageBody;return e.isAuth?I.a.createElement("div",null,I.a.createElement("h3",null," Message"),I.a.createElement("div",null,I.a.createElement("textarea",{value:s,onChange:function(t){var a=t.target.value;e.updateNewMessageBody(a)},placeholder:"Enter your message",className:R.a.textArea}),I.a.createElement("button",{onClick:function(){e.sendMessage()},className:R.a.buttonAddPost},"Send")),I.a.createElement("div",{className:R.a.dialogs},I.a.createElement("div",{className:R.a.dialogsItems},a),I.a.createElement("div",{className:R.a.messages},n))):I.a.createElement(B.a,{to:"/login"})},J=a(5),Y=a(13),K=a(14),X=a(16),Z=a(15),V=a(17),q=function(e){return{isAuth:e.auth.isAuth}},Q=function(e){var t=function(t){function a(){return Object(Y.a)(this,a),Object(X.a)(this,Object(Z.a)(a).apply(this,arguments))}return Object(V.a)(a,t),Object(K.a)(a,[{key:"render",value:function(){return this.props.isAuth?I.a.createElement(e,this.props):I.a.createElement(B.a,{to:"/login"})}}]),a}(I.a.Component);return Object(J.b)(q)(t)},$=Object(n.d)(Object(J.b)(function(e){return{dialogsPage:e.dialogsPage}},function(e){return{sendMessage:function(){e({type:"SEND_MESSAGE"})},updateNewMessageBody:function(t){e({type:"UPDATE_NEW_MESSAGE_BODY",body:t})}}}),Q)(H),ee=a(34),te=a.n(ee),ae=a(27),ne=a.n(ae),se=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),a=[],n=1;n<=t;n++)a.push(n);return I.a.createElement("div",null,I.a.createElement("div",null,a.map(function(t){return I.a.createElement("span",{className:e.currentPage===t&&te.a.selectedPage,onClick:function(a){e.onPageChanged(t)}},t)})),e.users.map(function(t){return I.a.createElement("div",{key:t.id},I.a.createElement("span",null,I.a.createElement("div",null,I.a.createElement(L.b,{to:"/profile/"+t.id},I.a.createElement("img",{src:null!=t.photos.small?t.photos.small:ne.a,className:te.a.userPhoto}))),I.a.createElement("div",null,t.followed?I.a.createElement("button",{disabled:e.followingInProgress.some(function(e){return e===t.id}),onClick:function(){e.unfollow(t.id)}},"Unfollow"):I.a.createElement("button",{disabled:e.followingInProgress.some(function(e){return e===t.id}),onClick:function(){e.follow(t.id)}},"Follow"))),I.a.createElement("span",null,I.a.createElement("span",null,I.a.createElement("div",null,t.name),I.a.createElement("div",null,t.status)),I.a.createElement("span",null,I.a.createElement("div",null,"u.location.country"),I.a.createElement("div",null,"u.location.city"))))}))},re=a(49),oe=a.n(re),ie=function(e){return I.a.createElement("div",{style:{backgroundColor:"white"}},I.a.createElement("img",{src:oe.a}))},ce=function(e){function t(){var e,a;Object(Y.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(X.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(s)))).onPageChanged=function(e){a.props.getUsers(e,a.props.pageSize)},a}return Object(V.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return I.a.createElement(I.a.Fragment,null,this.props.isFetching?I.a.createElement(ie,null):null,I.a.createElement(se,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress}))}}]),t}(I.a.Component),le=Object(n.d)(Q,Object(J.b)(function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}},{follow:function(e){return function(t){t(O(!0,e)),l(e).then(function(a){0==a.data.resultCode&&t(function(e){return{type:"FOLLOW",userId:e}}(e)),t(O(!1,e))})}},unfollow:function(e){return function(t){t(O(!0,e)),u(e).then(function(a){0==a.data.resultCode&&t(function(e){return{type:"UNFOLLOW",userId:e}}(e)),t(O(!1,e))})}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},toggleFollowingProgress:O,getUsers:function(e,t){return function(a){a(P(!0)),c(e,t).then(function(e){a(P(!1)),a({type:"SET_USERS",users:e.items}),a({type:"SET_TOTAL_USERS_COUNT",count:e.totalCount})})}}}))(ce),ue=a(25),me=a.n(ue),de=function(e){function t(){var e,a;Object(Y.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(X.a)(this,(e=Object(Z.a)(t)).call.apply(e,[this].concat(s)))).state={editMode:!1,status:a.props.status},a.activateEditMode=function(){a.setState({editMode:!0})},a.onStatusChange=function(e){a.setState({status:e.currentTarget.value})},a}return Object(V.a)(t,e),Object(K.a)(t,[{key:"deactivateEditMode",value:function(){this.setState({editMode:!1}),this.props.updateStatus(this.state.status)}},{key:"render",value:function(){return I.a.createElement("div",null,!this.state.editMode&&I.a.createElement("div",null,I.a.createElement("span",{onDoubleClick:this.activateEditMode},this.props.status||"-------")),this.state.editMode&&I.a.createElement("div",null,I.a.createElement("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.deactivateEditMode.bind(this),value:this.state.status})))}}]),t}(I.a.Component),pe=a(50),ge=a.n(pe),fe=a(51),Ee=a.n(fe),he=function(e){return e.profile?I.a.createElement("div",{className:me.a.content},I.a.createElement("div",{className:me.a.image_container},I.a.createElement("img",{className:me.a.content_image,src:Ee.a})),I.a.createElement("div",{className:me.a.description},I.a.createElement("img",{src:ge.a}),I.a.createElement("img",{src:e.profile.photos.large}),I.a.createElement(de,{status:e.status,updateStatus:e.updateStatus}))):I.a.createElement(ie,null)},_e=a(28),ve=a.n(_e),be=a(52),Pe=a.n(be),Oe=function(e){return I.a.createElement("div",{className:Pe.a.item},I.a.createElement("img",{src:ne.a,alt:"avatar"}),e.message,I.a.createElement("p",null,"likes:",e.likesCount))},Ne=function(e){var t=e.posts.map(function(e){return I.a.createElement(Oe,{message:e.message,likesCount:e.likesCount})}),a=I.a.createRef();return I.a.createElement("div",{className:ve.a.postsBlock},I.a.createElement("h3",null," My posts"),I.a.createElement("div",null,I.a.createElement("textarea",{onChange:function(){var t=a.current.value;e.updateNewPostText(t)},ref:a,value:e.newPostText,className:ve.a.textArea}),I.a.createElement("button",{onClick:function(){e.addPost()},className:ve.a.buttonAddPost},"Add post")),I.a.createElement("div",null,t))},Se=Object(J.b)(function(e){return{newPostText:e.profilePage.newPostText,posts:e.profilePage.posts}},function(e){return{addPost:function(){e({type:"ADD-POST"})},updateNewPostText:function(t){var a=e(function(e){return{type:"UPDATE-NEW-POST-TEXT",newText:e}}(t));e(a)}}})(Ne),we=function(e){return I.a.createElement("div",null,I.a.createElement(he,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),I.a.createElement(Se,null))},je=function(e){function t(){return Object(Y.a)(this,t),Object(X.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=1049),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return I.a.createElement(we,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),t}(I.a.Component),ye=Object(n.d)(Object(J.b)(function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}},{getUserProfile:function(e){return function(t){m(e).then(function(e){t({type:"SET_USER_PROFILE",profile:e.data})})}},getStatus:function(e){return function(t){d.getStatus(e).then(function(e){t(g(e.data))})}},updateStatus:function(e){return function(t){d.updateStatus(e).then(function(a){0===a.data.resultCode&&t(g(e))})}}}),B.f)(je),Te=a(23),Ce=a.n(Te),ke=a(53),Ae=a.n(ke),Ie=function(e){return I.a.createElement("header",{className:Ce.a.header},I.a.createElement("div",{className:Ce.a.header_block},I.a.createElement("img",{className:Ce.a.header_logo,src:Ae.a}),I.a.createElement("p",{className:Ce.a.header_title},"\u0421heerful conversation!"),I.a.createElement("div",{className:Ce.a.loginBlock},e.isAuth?e.login:I.a.createElement(L.b,{to:"/login"},"Login"))))},Ue=function(e){function t(){return Object(Y.a)(this,t),Object(X.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=this;o.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then(function(t){if(0===t.data.resultCode){var a=t.data.data,n=a.id,s=a.login,r=a.email;e.props.setAuthUserData(n,r,s)}})}},{key:"render",value:function(){return I.a.createElement(Ie,this.props)}}]),t}(I.a.Component),xe=Object(J.b)(function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}},{setAuthUserData:w})(Ue),Me=function(e){return I.a.createElement("h1",null,"LOGIN")},De=a(54),Le=a.n(De),Fe=function(){return I.a.createElement("div",{className:"app-page"},I.a.createElement(xe,null),I.a.createElement(F,null),I.a.createElement("div",{className:"app-page_content"},I.a.createElement(B.b,{path:"/dialogs",render:function(){return I.a.createElement($,null)}}),I.a.createElement(B.b,{path:"/profile/:userId?",render:function(){return I.a.createElement(ye,null)}}),I.a.createElement(B.b,{path:"/users",render:function(){return I.a.createElement(le,null)}}),I.a.createElement(B.b,{path:"/login",render:function(){return I.a.createElement(Me,null)}}),I.a.createElement("img",{className:"app-page_intro",src:Le.a,alt:"intro"})),I.a.createElement("footer",{className:"footer"}))};x.a.render(I.a.createElement(L.a,null,I.a.createElement(J.a,{store:k},I.a.createElement(Fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,1,2]]]);
//# sourceMappingURL=main.c6c1743c.chunk.js.map